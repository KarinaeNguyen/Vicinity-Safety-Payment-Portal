<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="title">C·ªïng Thanh To√°n QR | VICINITY SAFETY</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .g-text-blue { color: #4285F4; }
        .flag-button {
            font-size: 1.5rem; line-height: 1; padding: 0 4px; cursor: pointer;
            opacity: 0.6; transition: opacity 0.2s; border: none; background: none;
        }
        .flag-button:hover, .flag-button.active { opacity: 1; }
    </style>
    
    <script>
        // C·∫•u h√¨nh Tailwind (n·∫øu c·∫ßn)
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Roboto', 'Inter', 'sans-serif'],
                    },
                }
            }
        }
        
        // --- D·ªÆ LI·ªÜU D·ªäCH THU·∫¨T (TRANSLATION DATA) ---
        const translations = {
            en: {
                title: "QR Payment Gate | VICINITY SAFETY", 
                company_name: "VICINITY SAFETY", 
                secure_payment: "SECURE PAYMENT", 
                account_no: "Account No:", 
                copy_no: "Copy No.", 
                payment_steps_title: "Payment Steps:",
                step_1: "Scan the QR code with your mobile banking app to pay.", 
                step_2: "Verify the recipient is VICINITY SAFETY CO., LTD.",
                transfer_note: "Please remember to enter the correct amount and your Name/Phone number in the transfer description (e.g., Tuan Tran 1234567890).", 
                privacy_link: "Privacy Policy & Terms of Service",
                
                // New translations for Step 3
                review_order_title: "Review and Place Order",
                review_order_instruction: "Please review the information above and proceed when you are ready.",
                agree_terms: "I agree with the ",
                terms_and_conditions: "Terms & Conditions",
                return_policy: ", Return Policy",
                purchase_confirmation: " and Purchase Confirmation & Transaction Information",
                place_order_btn: "Place Order and Pay",
                continue_to_review: "Continue to Review"
            },
            vi: {
                title: "C·ªïng Thanh To√°n QR | VICINITY SAFETY", 
                company_name: "VICINITY SAFETY", 
                secure_payment: "THANH TO√ÅN AN TO√ÄN", 
                account_no: "S·ªë t√†i kho·∫£n:", 
                copy_no: "Sao ch√©p", 
                payment_steps_title: "C√°c b∆∞·ªõc Thanh to√°n:",
                step_1: "Qu√©t m√£ QR b·∫±ng ·ª©ng d·ª•ng ng√¢n h√†ng di ƒë·ªông c·ªßa b·∫°n ƒë·ªÉ thanh to√°n.", 
                step_2: "X√°c minh ng∆∞·ªùi nh·∫≠n l√† VICINITY SAFETY CO., LTD.",
                transfer_note: "Qu√Ω kh√°ch vui l√≤ng nh·ªõ ƒëi·ªÅn ƒë√∫ng s·ªë ti·ªÅn v√† th√¥ng tin t√™n/SƒêT trong n·ªôi dung chuy·ªÉn ti·ªÅn (VD: Tuan Tran 1234567890).", 
                privacy_link: "Ch√≠nh s√°ch B·∫£o m·∫≠t & ƒêi·ªÅu kho·∫£n D·ªãch v·ª•",
                
                // New translations for Step 3
                review_order_title: "Xem l·∫°i v√† ƒë·∫∑t ƒë∆°n h√†ng",
                review_order_instruction: "H√£y xem l·∫°i th√¥ng tin tr√™n v√† ti·∫øp t·ª•c khi b·∫°n ƒë√£ s·∫µn s√†ng.",
                agree_terms: "T√¥i ƒë·ªìng √Ω v·ªõi ",
                terms_and_conditions: "ƒêi·ªÅu kho·∫£n v√† ƒêi·ªÅu ki·ªán",
                return_policy: ", Ch√≠nh s√°ch tr·∫£ h√†ng",
                purchase_confirmation: " v√† X√°c nh·∫≠n mua h√†ng v√† th√¥ng tin giao d·ªãch",
                place_order_btn: "ƒê·∫∑t h√†ng v√† thanh to√°n",
                continue_to_review: "Ti·∫øp t·ª•c xem l·∫°i"
            }
            // Kh√¥ng c√≥ ZH trong phi√™n b·∫£n n√†y ƒë·ªÉ ƒë∆°n gi·∫£n h√≥a, c√≥ th·ªÉ th√™m sau
        };

        let currentLang = 'vi';

        // --- H√ÄM D·ªäCH THU·∫¨T ---
        function changeLanguage(lang) {
            currentLang = lang;
            document.title = translations[lang].title;
            localStorage.setItem('paymentLang', lang); 

            document.querySelectorAll('.flag-button').forEach(btn => {
                btn.classList.toggle('active', btn.id === `flag-${lang}`);
            });

            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                const text = translations[lang][key];
                
                // X·ª≠ l√Ω ƒë·∫∑c bi·ªát cho checkbox ƒë·ªÉ tr√°nh ghi ƒë√® link
                if (key === 'agree_terms' || key === 'terms_and_conditions' || key === 'return_policy' || key === 'purchase_confirmation') {
                    // Kh√¥ng l√†m g√¨, s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω ri√™ng trong DOM manipulation
                } else if (element.tagName === 'A') {
                    element.textContent = text;
                } else {
                    element.textContent = text;
                }
            });
            document.getElementById('copy-btn').textContent = translations[currentLang].copy_no;
            
            // C·∫≠p nh·∫≠t l·∫°i n·ªôi dung checkbox (ƒë·ªÉ gi·ªØ nguy√™n c√°c th·∫ª <a>)
            updateAgreeTermsText();
        }

        function updateAgreeTermsText() {
            const checkboxLabel = document.getElementById('agree-terms-label');
            if (checkboxLabel) {
                checkboxLabel.innerHTML = `
                    <span data-translate="agree_terms">${translations[currentLang].agree_terms}</span>
                    <a href="#" class="text-blue-600 hover:underline">${translations[currentLang].terms_and_conditions}</a>
                    <span data-translate="return_policy">${translations[currentLang].return_policy}</span>
                    <a href="#" class="text-blue-600 hover:underline">${translations[currentLang].purchase_confirmation}</a>
                    <span class="text-red-500">*</span>
                `;
            }
            // C·∫≠p nh·∫≠t text c·ªßa n√∫t
            const placeOrderBtn = document.getElementById('place-order-btn');
            if(placeOrderBtn) {
                placeOrderBtn.textContent = translations[currentLang].place_order_btn;
            }
        }


        document.addEventListener('DOMContentLoaded', () => {
            const storedLang = localStorage.getItem('paymentLang') || 'vi';
            changeLanguage(storedLang);
            updateAgreeTermsText(); // G·ªçi l·∫ßn ƒë·∫ßu ƒë·ªÉ setup ƒë√∫ng
        });
        
        // --- H√ÄM SAO CH√âP (COPY) ---
        function copyText(text, elementId) {
            navigator.clipboard.writeText(text).catch(err => { console.error('Could not copy text: ', err); });

            const button = document.getElementById(elementId);
            const originalText = button.textContent;
            button.innerHTML = '<svg class="w-4 h-4 mr-1 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> ƒê√£ sao ch√©p!'; 
            setTimeout(() => { button.textContent = originalText; }, 3000);
        }

        // --- CH·ª®C NƒÇNG CHUY·ªÇN M√ÄN H√åNH ---
        function showReviewScreen() {
            document.getElementById('qr-payment-screen').classList.add('hidden');
            document.getElementById('review-order-screen').classList.remove('hidden');
        }

        function togglePlaceOrderButton() {
            const checkbox = document.getElementById('agree-terms-checkbox');
            const placeOrderBtn = document.getElementById('place-order-btn');
            if (placeOrderBtn) { // ƒê·∫£m b·∫£o n√∫t t·ªìn t·∫°i tr∆∞·ªõc khi thao t√°c
                placeOrderBtn.disabled = !checkbox.checked;
                placeOrderBtn.classList.toggle('opacity-50', !checkbox.checked);
                placeOrderBtn.classList.toggle('cursor-not-allowed', !checkbox.checked);
            }
        }
        
        // Khi ng∆∞·ªùi d√πng b·∫•m "ƒê·∫∑t h√†ng v√† thanh to√°n"
        function placeOrderAndPay() {
            alert('ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t v√† s·∫µn s√†ng thanh to√°n!'); // Thay th·∫ø b·∫±ng logic x·ª≠ l√Ω ƒë∆°n h√†ng th·ª±c t·∫ø
            // Sau khi ƒë·∫∑t h√†ng th√†nh c√¥ng, c√≥ th·ªÉ chuy·ªÉn h∆∞·ªõng ho·∫∑c hi·ªÉn th·ªã th√¥ng b√°o kh√°c
            // window.location.href = '/order-success'; 
        }

    </script>
</head>

<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 font-sans">

    <div class="w-full max-w-sm bg-white p-6 rounded-xl shadow-lg border border-gray-100 space-y-6">

        <div class="flex justify-end space-x-1">
            <button id="flag-en" class="flag-button" onclick="changeLanguage('en')" title="English">üá∫üá∏</button>
            <button id="flag-vi" class="flag-button active" onclick="changeLanguage('vi')" title="Ti·∫øng Vi·ªát">üáªüá≥</button>
        </div>

        <div id="qr-payment-screen">
            <div class="text-center space-y-1 pb-4 border-b border-gray-200">
                 <div class="flex items-center justify-center text-gray-800 text-2xl">
                    <span class="font-extrabold g-text-blue" data-translate="company_name">VICINITY SAFETY</span>
                </div>
                <div class="text-gray-500 text-sm">
                    <span class="font-medium text-green-600 mr-2" data-translate="secure_payment">THANH TO√ÅN AN TO√ÄN</span>
                    <span data-translate="account_no">S·ªë t√†i kho·∫£n:</span> 318851299
                    <button id="copy-btn" onclick="copyText('318851299', 'copy-btn')" 
                            class="ml-2 text-xs text-blue-500 hover:text-blue-700 transition duration-150" data-translate="copy_no">
                        Sao ch√©p
                    </button>
                </div>
            </div>

            <div id="qr-code-display" class="p-4 bg-white rounded-lg shadow-inner border border-gray-200 space-y-3">
                <img src="Company Bank QR.png" 
                      alt="VietQR Payment Code for Techcombank" 
                      class="w-full h-auto rounded-md">
                
                <div class="p-3 bg-yellow-100 border border-yellow-300 rounded-lg text-sm text-gray-700">
                    <p class="font-medium" data-translate="transfer_note">
                        Qu√Ω kh√°ch vui l√≤ng nh·ªõ ƒëi·ªÅn ƒë√∫ng s·ªë ti·ªÅn v√† th√¥ng tin t√™n/SƒêT trong n·ªôi dung chuy·ªÉn ti·ªÅn (VD: Tuan Tran 1234567890).
                    </p>
                </div>
            </div>

            <div class="text-sm text-gray-700 space-y-2 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                <p class="font-semibold text-gray-800" data-translate="payment_steps_title">C√°c b∆∞·ªõc Thanh to√°n:</p>
                <ol class="list-decimal list-inside space-y-1">
                    <li data-translate="step_1">Qu√©t m√£ QR b·∫±ng ·ª©ng d·ª•ng ng√¢n h√†ng di ƒë·ªông c·ªßa b·∫°n ƒë·ªÉ thanh to√°n.</li>
                    <li data-translate="step_2">X√°c minh ng∆∞·ªùi nh·∫≠n l√† **VICINITY SAFETY CO., LTD**.</li>
                </ol>
            </div>
            
            <button onclick="showReviewScreen()" 
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white g-blue hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 mt-4">
                <span data-translate="continue_to_review">Ti·∫øp t·ª•c xem l·∫°i</span>
            </button>
        </div>

        <div id="review-order-screen" class="hidden space-y-4">
            <h2 class="text-xl font-bold text-gray-800" data-translate="review_order_title">Xem l·∫°i v√† ƒë·∫∑t ƒë∆°n h√†ng</h2>
            <p class="text-gray-700 text-sm" data-translate="review_order_instruction">H√£y xem l·∫°i th√¥ng tin tr√™n v√† ti·∫øp t·ª•c khi b·∫°n ƒë√£ s·∫µn s√†ng.</p>

            <div class="flex items-start">
                <input type="checkbox" id="agree-terms-checkbox" class="form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out mt-1" onchange="togglePlaceOrderButton()">
                <label for="agree-terms-checkbox" class="ml-2 block text-sm text-gray-900" id="agree-terms-label">
                    </label>
            </div>

            <button id="place-order-btn" onclick="placeOrderAndPay()" disabled
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-blue-500 opacity-50 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150"
                    data-translate="place_order_btn">
                ƒê·∫∑t h√†ng v√† thanh to√°n
            </button>
        </div>


        <div class="text-center pt-2 border-t border-gray-100">
            <a href="#" class="text-xs text-gray-400 hover:text-blue-500" data-translate="privacy_link">Ch√≠nh s√°ch B·∫£o m·∫≠t & ƒêi·ªÅu kho·∫£n D·ªãch v·ª•</a>
        </div>

    </div>
</body>
</html>
